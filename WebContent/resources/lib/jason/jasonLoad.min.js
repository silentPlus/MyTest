/*
**jasonWap框架**
**主库jasonLoad静态文件js/css异步加载库**
**author:jasonYang**
*/if(!window.jasonLoad||typeof(jasonLoad)!=="function"){var jasonLoad=window.jasonLoad=(function(A){var C,B;var D=function(F){var E=this;E.params=E.extend({},{ldImg:"",errImg:"",timeOut:10000,jsFolder:"js/",jsVer:"",jsVTag:"",cssFolder:"css/",cssVer:"",cssVTag:""},F);E.jsLC=0;E.jsCC=0;E.cssLC=0;E.cssCC=0;E.cache={jsReady:"",jsLoading:"",cssReady:""};E.jsRelyData={};E.jsReadyCB=null;E.cssReadyCB=null;E.allReadyCB=null;E.MaskNode=C};D.fn=D.prototype={tag:function(E){return document.getElementsByTagName(E)},ce:function(E){return document.createElement(E)},extend:function(H){if(H==C){H=this}if(arguments.length===1){for(var E in H){this[E]=H[E]}return this}else{var G=Array.prototype.slice.call(arguments,1);for(var F=0;F<G.length;F++){for(var E in G[F]){H[E]=G[F][E]}}}return H},showMask:function(F,G){var E=this;E.domReady(function(){if(E.MaskNode==C||!E.MaskNode.parentNode){var H=E.ce("div");var I=F||"页面加载中，请稍等...";if(E.params.ldImg!=""){I='<div><img src="'+E.params.ldImg+'" /></div><div>'+I+"</div>"}H.innerHTML='<div style="position:fixed;top:50%;margin-top:-65px;width:220px;line-height:26px;padding:15px 0;background-color:#000;opacity:0.6;z-index:1000;text-align:center;color:#fff;border-radius:4px;font-size:13px;">'+I+"</div>";E.MaskNode=H.childNodes[0];E.tag("body")[0].appendChild(E.MaskNode);E.MaskNode.style.left=((A.innerWidth-parseInt(E.MaskNode.style.width))/2+"px");B=setTimeout(function(){if(E.MaskNode!=C){E.MaskNode.innerHTML=E.MaskNode.innerHTML+'<div style="font-size:0.63em;color:#fff;" onclick="javascript:window.location.reload();">网络出状况？请点击[<span style="color:#66f;">重新加载</span>]</div>'}},E.params.timeOut)}})},hideMask:function(){var E=this;if(E.MaskNode!=C){if(E.MaskNode.parentNode){E.MaskNode.parentNode.removeChild(E.MaskNode)}E.MaskNode=C;clearTimeout(B)}},config:function(E){this.params=this.extend({},this.params,E)},domReady:function(E){var F=this;if(document.readyState==="complete"||document.readyState==="loaded"||(!(navigator.userAgent.match(/MSIE 10.0/i)||navigator.userAgent.match(/Trident\/7/i))&&document.readyState==="interactive")){F.checkCB(E)}else{document.addEventListener("DOMContentLoaded",function(){F.checkCB(E)},false)}},jsReady:function(E){this.jsReadyC(E)},jsReadyC:function(E){var F=this;if(F.jsLC>=F.jsCC){F.jsReadyCB=null;F.checkCB(E)}else{F.jsReadyCB=E}},cssReady:function(E){var F=this;if(F.cssLC>=F.cssCC){F.cssReadyCB=null;F.checkCB(E)}else{F.cssReadyCB=E}},allReady:function(E){var F=this;if(F.jsLC>=F.jsCC&&F.cssLC>=F.cssCC){F.allReadyCB=null;F.checkCB(E)}else{F.allReadyCB=E}},checkCB:function(E){var F=this;if(F.jsLC>=F.jsCC&&F.cssLC>=F.cssCC){F.hideMask()}if(typeof(E)==="function"&&!(E instanceof RegExp)){E()}},jsRely:function(H,F,E){if(H==""||F==""){return}var G=this;G.jsCC++;G.showMask();G.domReady(function(){if(G.cache.jsReady.indexOf(H)>=0){G.load("js",F,E)}else{if(G.cache.jsLoading.indexOf(H)>=0){if(typeof(G.jsRelyData[H])=="undefined"){G.jsRelyData[H]=[]}var I={path:F,callback:E};G.jsRelyData[H].push(I)}else{G.js(H,function(){G.load("js",F,E)})}}})},js:function(F,E){var G=this;if(F==""){return}G.jsCC++;G.cache.jsLoading+=F;G.showMask();G.domReady(function(){G.load("js",F,E)})},css:function(F,E){if(F==""){return}var G=this;G.cssCC++;G.showMask();G.domReady(function(){G.load("css",F,E)})},load:function(N,J,F){var L=this;var M=false;if(N=="css"){var I=L.ce("link");I.type="text/css";I.rel="stylesheet";I.href=L.params.cssFolder+L.params.cssVer+J+L.params.cssVTag}else{var I=L.ce("script");I.type="text/javascript";I.src=L.params.jsFolder+L.params.jsVer+J+L.params.jsVTag}L.tag("head")[0].appendChild(I);var G=function(){if(N=="css"){L.cache.cssReady+=J;L.cssLC++;L.checkCB(F);if(L.cssReadyCB!=null){L.cssReady(L.cssReadyCB)}}else{L.cache.jsReady+=J;L.jsLC++;L.checkCB(F);if(L.jsReadyCB!=null){L.jsReadyC(L.jsReadyCB)}if(typeof(L.jsRelyData[J])!="undefined"){var P=L.jsRelyData[J];for(var O=0;O<P.length;O++){L.load("js",P[O]["path"],P[O]["callback"])}}}if(L.allReadyCB!=null){L.allReady(L.allReadyCB)}};var H=function(){if(I.readyState=="loaded"||I.readyState=="complete"){G()}};var K=function(){var O=false;if(I["sheet"]){G();O=true}if(!O){setTimeout(function(){K()},1)}};var E=function(){if(N=="css"&&(/webkit/i.test(navigator.userAgent))){K();M=true}if(typeof(I.onreadystatechange)!="undefined"){I.onreadystatechange=H;M=true}if(typeof(I.onload)!="undefined"&&!M){I.onload=G}if(typeof(I.onerror)!="undefined"){I.onerror=function(){L.tag("head")[0].removeChild(I);L.tag("head")[0].appendChild(I);E()}}};E()}};return D})(window)}function localSupport(){try{if(!("localStorage" in window)||window["localStorage"]==null){alert("您的浏览器不支持本地存储!");return false}}catch(A){alert(A);return false}return true}function localSave(B,C){if(!localSupport()){return null}if(typeof(B)=="undefined"){return null}if(typeof(C)!="undefined"&&C!=null){localStorage.setItem(B,C);return C}var A=localStorage.getItem(B);return A=="undefined"?null:A}function localLoadItem(A){return localSave(A)}function localLoadKey(B){if(!localSupport()){return null}var A=new Array();for(var C=0;C<localStorage.length;C++){var D=localStorage.key(C);if(D.indexOf(B)==0){A.push(D)}}return A}function localRemove(A){if(!localSupport()){return null}if(typeof(A)=="undefined"){return null}localStorage.removeItem(A)}function localClearCart(D){try{var A=localLoadKey(D+"_");for(var B=0;B<A.length;B++){localStorage.removeItem(A[B])}gCartMenuItemList=new Array()}catch(C){}}var gCartMenuItemList=new Array();